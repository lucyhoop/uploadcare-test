function customImageValidator(fileInfo) {
  return fileInfo.done().then(function(info) {
    console.log("Uploadcare info object:", info); // for debugging

    const allowedDimensions = [
      [300, 250],
      [728, 90],
      [300, 600],
      [160, 600],
      [320, 50],
      [320, 480],
      [336, 280],
      [768, 1024],
      [848, 480],
      [1200, 1200],
      [900, 1600]
    ];

    const allowedTypes = ['image/jpeg', 'image/png', 'image/gif'];
    const maxSize = 500000; // 500 KB

    const mimeType = info.mimeType;
    const size = info.size;
    const width = info.originalImageInfo?.width;
    const height = info.originalImageInfo?.height;

    if (!mimeType || !allowedTypes.includes(mimeType)) {
      throw new Error("❌ File must be JPG, PNG, or GIF.");
    }

    if (size > maxSize) {
      throw new Error("❌ File must be 500 KB or smaller.");
    }

    if (!width || !height) {
      throw new Error("❌ Unable to detect image dimensions. Please upload a standard image file.");
    }

    const validDimensions = allowedDimensions.some(dim => width === dim[0] && height === dim[1]);

    if (!validDimensions) {
      throw new Error(`❌ Image size (${width}x${height}) must match one of the approved ad dimensions.`);
    }

    return info;
  });
}
